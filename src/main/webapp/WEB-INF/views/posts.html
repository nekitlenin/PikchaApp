<!doctype html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>–ü–æ—Å—Ç—ã</title>
    <link rel="stylesheet" href="/resources/style.css"/>
</head>
<body>
<img class="logo-img-top" src="/resources/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø">
<div id="header">

    <p>–í–∞—à–∞ –ø–æ—á—Ç–∞:
        <th:block sec:authentication="principal.username"/>
    </p>


    <h1>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è <span th:text="${user.name}"></span></h1>
</div>
<div id="content">
    <h3>–í–∞—à–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏:</h3>
    <div class="right">
        <form th:action="@{/posts/{userId} (userId=${user.id})}" th:method="get">
            <p><label for="pageSize">–ü–æ–∫–∞–∑–∞—Ç—å:</label>
                <select id="pageSize" name="pageSize">
                    <option value="5" th:selected="${pageSize == 5}">5</option>
                    <option value="10" th:selected="${pageSize == 10}">10</option>
                    <option value="15" th:selected="${pageSize == 15}">15</option>
                    <option value="20" th:selected="${pageSize == 20}">20</option>
                    <option value="-1" th:selected="${pageSize == -1}">–í—Å–µ</option>
                </select>
                –∏–∑ <span th:text="${totalPosts}"></span> &nbsp;&nbsp;&nbsp;&nbsp;

                <label for="page">–°—Ç—Ä–∞–Ω–∏—Ü–∞:</label>
                <select id="page" name="page">
                    <option value="0" th:selected="${page == 0}">1</option>
                    <option value="1" th:selected="${page == 1}">2</option>
                    <option value="2" th:selected="${page == 2}">3</option>
                    <option value="-1" th:selected="${page == -1}">–í—Å–µ</option>
                </select>
                –∏–∑ <span th:text="${totalPages}"></span> &nbsp;&nbsp;&nbsp;&nbsp;

                <label for="sortType">–°–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å:</label>
                <select id="sortType" name="sortType">
                    <option value="default" th:selected="${sortType == 'default'}">none</option>
                    <option value="date" th:selected="${sortType == 'date'}">–ü–æ –¥–∞—Ç–µ</option>
                    <option value="title" th:selected="${sortType == 'title'}">–ü–æ –∑–∞–≥–æ–ª–æ–≤–∫—É</option>
                </select>
                &nbsp;&nbsp;&nbsp;&nbsp;
                <input class="button" type="submit" value="–ü—Ä–∏–º–µ–Ω–∏—Ç—å">
            </p>
            <div class="error">
                <p th:if="${error}" th:text="${error}"></p>
            </div>
        </form>
    </div>
    <br>
    <div th:each="post : ${postList}">
        <div class="post">
            <div class="post-title" th:text="${post.title}"></div>
            <div class="post-content" th:text="${post.text}"></div>
            <div class="post-date" th:text="${post.dateCreate}"></div>
            <div class="post-actions">
                <div class="mini-menu">
                    <button class="mini-menu-button">...</button>
                    <div class="mini-menu-actions">
                        <a th:href="@{'/posts/' + ${user.id} + '/update/' + ${post.id}}">
                            <button class="button">–ò–∑–º–µ–Ω–∏—Ç—å üîÑ</button>
                        </a>
                        <a th:href="@{'/posts/' + ${user.id} + '/delete/' + ${post.id}}">
                            <button class="button">–£–¥–∞–ª–∏—Ç—å ‚ùå</button>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<a class="fixed-bottom" th:href="@{/posts/{userId}/add (userId=${user.id})}">
    <input class="button" type="submit" value="‚ûï">
</a>
<div class="top-right">
    <a th:href="@{/users}">
        <input class="button" type="submit" value="–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å">
    </a>&nbsp;
    <th:block sec:authorize="isAuthenticated()">
        <a href="/logout">
            <input class="button" type="submit" value="–í—ã–π—Ç–∏">
        </a>
    </th:block>
    <th:block sec:authorize="!isAuthenticated()">
        <a href="/login">
            <input class="button" type="submit" value="–í–æ–π—Ç–∏">
        </a>
    </th:block>
</div>
</body>
</html>
